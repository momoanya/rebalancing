
# Passive Investment Rebalancing Analysis 

----
> Determines the after-tax, after-cost effectiveness of traditional retail passive investment management mechanisms in a Canadian context.

This project analyzes the after-tax, after-cost effectivness of the following retail passive investment management mechanisms in a Canadian context: 

- dividend reinvestment plans
- sweeping cash to no load index funds until rebalancing occurs
- tax efficient portfolio level/multi-account rebalancing
- adjusting the range around a target allocation
- increasing or decreasing the periodicity of rebalancing (e.g. annual, quarterly...)
- increasing the minimum trade dollar to reduce excessive trading

The conclusion is that all of these mechanisms do not add value to returns or risk managment with the exception of tax efficient portfolio level/multi-account rebalancing which yields almost 25 bps over doing nothing, and almost 50 bps over the worse performing asset mix. 

The results are summarized in the JupyterLab notebook: 

> analysis.ipynb

## Installation

Simply download the zip files to a local directory and run analysis.ipynb from JupyterLab. 

## Usage example

### Account level dataframes
Individual account dataframes can be generated by calling rebalance_account.py. The input parameter is a dictionary, templates which can be found/called from account_templates.py. This function returns the full account dataframe. 

```python
import rebalance_account as ra  
import account_templates as at  
 
df = ra.rebalance_account(at.inv)
```



### Portfolio level dataframes

Portfolio rebalancing will rebalance across many accounts, and consequently requires more setup. The function will return two dataframes, one showing daily returns and the other showing asset allocations for each account for the purpose of plotting.  

```Python
import rebalance_account as ra  
import account_templates as at  
accounts = [at.p2_inv, at.p1_inv, at.p2_rsp, at.p1_rsp, at.p2_tfsa, at.p1_tfsa]  
start_date = '2003-01-01' 
end_date = '2005-01-01' 
 
# Clear deposits in the dictionaries.  
for act in accounts:  
        act["dep_with"] = {}  
        act["end_date"] = end_date  
 
# Place initial deposits to the accounts.  
at.p1_inv["dep_with"][start_date] = 100000  
at.p1_rsp["dep_with"][start_date] = 100000  
at.p1_tfsa["dep_with"][start_date] = 100000  
at.p2_inv["dep_with"][start_date] = 100000  
at.p2_rsp["dep_with"][start_date] = 100000  
at.p2_tfsa["dep_with"][start_date] = 100000  

# Set portfolio level rebalancing parameters.
port_allocation = {  
        # Schedule for portfolio rebalancing,  
        # Alias	Description  
        # D	    Day  
        # M	    Month end  
        # Q	    Quarter end  
        # A	    Year end  
        # BA	Business year end  
        "rebalance_period": "Q",  
        # Target allocation  
        "atar_cash": 0.1,  
        "atar_fixed_income": 0.4,  
        "atar_equity": 0.5,  
        # Maximum allocation limits.  
        "amax_cash": 0.15,  
        "amax_fixed_income": 0.45,  
        "amax_equity": 0.55,  
        # Minimum allocation limits.  
        "amin_cash": -0.05,  
        "amin_fixed_income": 0.35,  
        "amin_equity": 0.45,  
        # Rebalance from maximum to rmax level.  
        "rmax_cash": 0.1,  
        "rmax_fixed_income": 0.40,  
        "rmax_equity": 0.50,  
        # Rebalance from minimum to rmin level.  
        "rmin_cash": 0.1,  
        "rmin_fixed_income": 0.4,  
        "rmin_equity": 0.5,  
    }  

d, df1 = rp.rebalance_portfolio(port_allocation, accounts=accounts, start_date=start_date, end_date=end_date)
```

### Scenarios
Scenarios were run from scenarios.py and were custom designed to generate thousands of portfolio results for comparison.




### Release History

- 0.1.0 
Analysis released.

### Meta

* **Neil Murphy** - [neilsmurphy](https://github.com/neilsmurphy), neilsmurphy@outlook.com


### License

This project is licensed under the MIT License - see the LICENSE.md file for details

### Acknowledgements

All those on stack overflow. My SO handle:  [runout](https://stackoverflow.com/users/edit/10888655)  
